<!DOCTYPE html>
<html lang="en">

  <head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-154911146-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-154911146-1');
</script>


<script data-ad-client="ca-pub-5014618487406640" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5014618487406640"
     crossorigin="anonymous"></script>

    <title>Geekee - Motor Position Control Arduino</title>
    <meta charset="utf-8">
    <meta name = "description" content = "DC motor position control PWM and Rotary potentiometer feedback and reference using Arduino"  >
    <meta name = "keywords" content="Motor position control, position loop, Arduino rotary potentiometer, Arduino PWM, DC motor, PID controller, PID tuning,
                                        beginners , control theory, free tutorial">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="author" content="Geekee Ceebee ceebee1108@gmail.com">
 

    <title>GeeKee CeeBee - PID for DC Motor Position Control using Rotary Potentiometer</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="vendor/devicons/css/devicons.min.css" rel="stylesheet">
    <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/resume.min.css" rel="stylesheet">
    <link href="css/prism.css" rel="stylesheet" />
  </head>
<script data-ad-client="ca-pub-5014618487406640" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <body id="page-top">

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
      <a class="navbar-brand js-scroll-trigger" href="index.html">
        <span class="d-block d-lg-none">GeeKee CeeBee</span>
        <span class="d-none d-lg-block">
          <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="img/logo.webp" alt="">
           <h3> <a class="text-dark"  href="index.html" >HOME </a> </h3>


           <br /><br />

        </span>
      </a>


     

    </nav>

    <div class="container-fluid p-0">

      <section class="resume-section p-3 p-lg-5 d-flex d-column" id="about">
        <div class="my-auto">
          <h1 class="mb-0">GeeKee
            <span class="text-primary">CeeBee</span>
          </h1>
         <!--  <div class="subheading mb-5">3542 Berry Street · Cheyenne Wells, CO 80810 · (317) 585-8468 ·
            <a href="mailto:name@email.com">name@email.com</a>
          </div>-->
          <p >Welcome to GeeKee CeeBee's Page: House of Mechatronics.<br />
            Contact Email: Ceebee1108@gmail.com</p>

<p>__________________________________________________________________________________________________________________________________</p>


 <style>
aside {
  width: 15%;

  padding-left: 15px;
  margin-left: 15px;
  float: right
  font-style: italic;
  font-style: bold;
  background-color: lightgray;
position: fixed;
right: 5px;

}


div.b {
  width: 50%;
  padding-bottom: 30px;

}
</style>




<aside>
<p> <h3 >Similar Projects</h3>

 <a class="mb-0"  href="PID Controller.html" ><u>1. DC Motor Speed Control</u></a><br />
   <a class="mb-0"  href="Dual_Encoder.html" ><u>2. Anti-Backlash Motor Control </u> </a><br />
     <a class="mb-0"  href="index.html" ><u> More... </u></a>
</p>
</aside>

             <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
           <h2 >PID DC Motor Position Control</h2>
            <img src="img/PID_position.gif" alt="" align= "Center" width="450" height="225" style="border:10px solid #bd5d38;border-radius: 2%;margin-bottom: 10px">
         <div class="b">
            Step by step practical guide to position control of a DC motor using rotary potentiometer.
            Formulate PID theory using Numerical Approximation method.
            Write PID code from scratch (w/o using pre-written library).
            Demonstrate the use of rotary potentiometers as feedback and control, L298n motor driver.
           Disclaimer: The code and other information on this project are provided on "AS IS" basis with no warranty. Please follow best practices and assess
              your own potential risks for this project.
          </div>

     </div>
          </div>

          <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
          <h3 >Components List</h3>
             <p class="mb-5">

            Arduino Uno<br>
            DC Motor Double-ended Shaft (BestTong 775)<br>
            L298N Dual H-bridge Motor Driver<br>
            2X Rotary Potentiometer<br>
            Shaft Coupler (Custom)<br>
            DC Power Supply (6-12V)<br>
            Jumper Wires and Breadboard
            </p>
    </div> </div>



           <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
          <h3 >Step-by-step video guide</h3>

                    <div class="b">
            In this video guide, you will learn how to control position of any DC motor by controlling the supply voltage. Arduino Uno is used to perform PWM voltage control using the PID controller.
                     Video covers the rotary potentiometer as feedback sensor, basic PID theory,, derivation of control law, understanding the discrete methods of calculating
                     derivative and integration of error. Please watch the whole video for better understanding.
           </div>
        <iframe width="450" height="300" src="https://www.youtube.com/embed/-P-6bMbQh1E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style= "border:10px solid #bd5d38;border-radius: 2%"></iframe>
           </div> </div><br /><br />

                  <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
                  <h3 >Control Diagram</h3>
                        <div class="b">
            Rotary potentiometer feedback signal is used to determine the error angle between the reference angle from potentiometer and the actual motor angle. PID controller
                            simply controls the amount of voltage needed by the motor using PWM in order to reach the desired output.
           </div>

          <img src="img/Position_Control_Diagram.webp" alt="" align= "Center" width="450" height="250" style=" border:10px solid #bd5d38;border-radius: 2%">
</div> </div>
         <br /><br />



         <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
          <h3 >Wiring Diagram</h3>
                      <div class="b">
            Below is the wiring diagram for the components used in this project.
                            Analog pins A3 and A4 are used for feedback and reference pot. Pin6 is the PWM pin to control the amount of voltage sent
                            to the motor driver. Pin7 and 8 are used to change motor direction by changing the polarity of the supply voltage with the help of
                          L298n h-bridge motor driver.
                            Make sure there's a common ground (not earth ground) between the motor driver, arduino and external power supply.
           </div>
          <img src="img/DC_Motor_Position_Control_Schematic.webp" alt="" align= "Center" width="450" height="350" style= "border:10px solid #bd5d38;border-radius: 2%">
</div> </div>
         <br /><br />


          <p>__________________________________________________________________________________________________________________________________</p>

              <div class="resume-item d-flex flex-column flex-md-row mb-5">
            <div class="resume-content mr-auto">
          <h3 >Arduino Code</h3>
          <figure>
  <figcaption>PID for DC Motor Position Control using Rotary Potentiometer</figcaption>
  <pre>
    <code class = "language-c">
//GeeKee CeeBee
// ************ DEFINITIONS************

int potPin = A3;          // Reference Potentiometer
int encoder_pot = A2;    // Position Feedback sensor

int val = 0;
int encoder_val =0;
float kp = 0.2;
float ki = 0.00000 ;
float kd = 2.00;
float Theta, Theta_d;
int dt;
unsigned long t;
unsigned long t_prev = 0;
int val_prev =0;
float e, e_prev = 0, inte, inte_prev = 0;
float Vmax = 12;
float Vmin = -12;
float V = 0.1;
const byte PWMPin = 6;
const byte DirPin1 = 7;
const byte DirPin2 = 8;


//***Motor Driver Functions*****

void WriteDriverVoltage(float V, float Vmax) {
  int PWMval = int(255 * abs(V) / Vmax);
  if (PWMval > 255) {
    PWMval = 255;
  }
  if (V > 0) {
    digitalWrite(DirPin1, HIGH);
    digitalWrite(DirPin2, LOW);
  }
  else if (V < 0) {
    digitalWrite(DirPin1, LOW);
    digitalWrite(DirPin2, HIGH);
  }
  else {
    digitalWrite(DirPin1, LOW);
    digitalWrite(DirPin2, LOW);
  }
  analogWrite(PWMPin, PWMval);

}


void setup() {
  Serial.begin(9600);
  pinMode(DirPin1, OUTPUT);
  pinMode(DirPin2, OUTPUT);

}


void loop() {
  val = analogRead(potPin);                           // Read V_out from Reference Pot
  encoder_val =analogRead(encoder_pot);               // Read V_out from Feedback Pot
  t = millis();
  dt = (t - t_prev);                                  // Time step
  Theta = val;                                        // Theta= Actual Angular Position of the Motor
  Theta_d = encoder_val;                              // Theta_d= Desired Angular Position of the Motor

  e = Theta_d - Theta;                                // Error
  inte = inte_prev + (dt * (e + e_prev) / 2);         // Integration of Error
  V = kp * e + ki * inte + (kd * (e - e_prev) / dt) ; // Controlling Function

  if (V > Vmax) {
      V = Vmax;
      inte = inte_prev;
    }
    if (V < Vmin) {
      V = Vmin;
      inte = inte_prev;
      val_prev= val;
    }
  WriteDriverVoltage(V, Vmax);
  Serial.println(Theta_d); Serial.print(" \t");
    Serial.print(Theta); Serial.print(" \t ");
   t_prev = t;
    inte_prev = inte;
    e_prev = e;
    delay(10);

}


    </code>
  </pre>
</figure>
 </div> </div>
          </ul>
        </div>
      </section>


        <footer class="page-footer font-small #040245 fixed-bottom">

  <!-- Copyright -->

  <div class="footer-copyright text-right py-3">

      <h3 class="font-weight-bold deep-orange-lighter-hover mb-3">Consider Supporting Me </h3>

      <form action="https://www.paypal.com/donate" method="post" target="_top">
<input type="hidden" name="hosted_button_id" value="FFXV3ZURVMFGA" />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>


<!--    <a href="https://mdbootstrap.com/"> MDBootstrap.com</a>-->

  <!-- Copyright -->
 </div>
</footer>

<footer class="page-footer font-small blue">

  <!-- Copyright -->
  <div class="footer-copyright text-center py-3">© 2022 Copyright:
       <a href="http://GeekeeCeebee.com/"> GeekeeCeebee.com,</a>
      <a href="http://GeekeeCeebee.com/privacy.html"> Privacy Policy</a>
  </div>
  <!-- Copyright -->

</footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/resume.min.js"></script>
    <script src="js/prism.js"></script>
<!--       
      <script type="text/javascript"> var infolinks_pid = 3354734; var infolinks_wsid = 0; </script>
    <script type="text/javascript" src="//resources.infolinks.com/js/infolinks_main.js"></script> -->

  </body>

</html>
